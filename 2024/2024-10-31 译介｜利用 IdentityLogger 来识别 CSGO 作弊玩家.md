---
author: catbaron
title: 译介｜利用 IdentityLogger 来识别 CSGO 作弊玩家
date: 2024-10-31
draft: true
categories: 
tags:
---
[原文地址](https://mobeigi.com/blog/gaming/how-we-outsmarted-csgo-cheaters-with-identitylogger/)

## 维护一个 CSGO 服务器
我曾经创建并维护了一个位于澳洲和新西兰的 CSGO 社区服务器，
这个叫做 Invex Gaming 的服务器活跃于2014年至2019年间。
得益于我们优秀的社区环境、创作内容、比赛和各种自定义的游戏插件，
这个服务器很快就流行开来。

维护一个游戏社区需要做很多事情，包括：
* 维护社区的基础建设和服务器
* 平衡社区捐赠和开销
* 添加新的内容，比如增加玩家模型、修复 hitbox
* 自动化的 VIP 系统和权限控制
* 为社区编写特有的插件
* 组织 DDOS 攻击
* 处理骚扰举报
* 统治世界

其中最单调乏味的就是识别和封禁作弊玩家。

##  猫鼠游戏
不管是什么游戏都会有作弊玩家。作为服务器维护者，你可以通过各种技术手段来检测他们。
我们可以使用服务端的代码来检测人类玩家难以做到的行为。
我们也可以使用 Valve Anti-Cheat（VAC） 系统。
这个系统虽然性能堪忧，但对于明显的作弊行为还是很好用的。
我们可以将你的系统内核用于反作弊，也可以将它用于挖比特币（作为你的感谢费）。
好吧，我们其实没这么干，但是有些反作弊软件确实这么做了（比如 ESEA）。

这些方法都挺好的，但是在作弊/反作弊的拉锯战中，它们没办法检测出所有的作弊行为。
作为最终手段，我们只能对全天候的 CSGO 游戏记录进行人为分析。
我们的管理员（你可以把他们视为陪审团）会对一位玩家是否作弊进行谨慎的裁决。

一旦我们抓到了一个作弊玩家，出于对竞技精神的尊重，我们会将他永久封禁。
对作弊者来说，他们不喜欢被抓，他们也不会停止作弊。
有无数次，我们解封了一些玩家，他们第二天就因为作弊而再次被封。
不过其中有一些玩家更了解技术，也知道一些规避封禁的基本方法。

## 规避封禁的艺术
一个玩家可以怎样规避封禁呢？

封禁策略的核心是一个可以用作身份识别的信息（识别子），基于这个信息我们可以阻止你访问服务。

在互联网中，这个信息通常会包括你的 IP 地址。
IP 地址由你的网络服务商分配给你，你通过它互联网中的其他的机器通信。
比如一个 IPv4 的例子可以是：198.51.100.1。

在 Steam 的系统中，每个玩家都需要一个 Steam ID 来游玩 Steam 上的游戏。
这是一个唯一的识别子，和你的 Steam 账号绑定，用来在 Steam 的世界中识别你的身份。
一个 Steam ID 的例子是 STEAM_1:1:1111。

我们假设一个被封号的玩家的 IP address 是 198.51.100.1，而他的 Steam ID 是 STEAM_1:1:1111。
我们会把他的封禁记录存储到数据库中，然后把他踢出服务器。
这样一来，他下次加入服务器的时候，他的 IP 和 Steam ID 就无法通过封禁检测了。

要逃过这样的封禁，玩家可能会切换到另一个游戏账号。
这个新账号的 Steam ID（比如 STEAM_1:1:2222）和他被封禁的 Steam ID 不同，
但是这都在我们的反作弊之王的计划之中。
如果一个玩家有不同的 Steam ID 但是他的 IP 已经被封禁，系统会再次封禁他，
并将这个新的 Steam ID 关联到之前的封禁记录上。
这其实是一个建立玩家指纹的过程，我们现在知道这个玩家与两个 Steam ID 和一个 IP 地址关联。

如果反过来，这个玩家决定使用 VPN 来更换他的 IP 地址，那么他的新 IP 地址
（比如 203.0.113.60）无法匹配到被封禁的 IP。
不过和之前一样，如果一个玩家有不同的 IP 地址，但是他的 Steam ID 已经被封禁，
反作弊系统依然会再次封禁他，并将这个新的 IP 地址关联到之前的封禁记录，
进一步完善这个玩家的指纹。

除了这两个识别子之外，我们没有其他的识别子可以识别玩家的身份了。
但是对大部分作弊玩家来说，这种程度也够用了

### 给我等一下
要是他们同时更换了 IP 地址和 Steam ID 呢？

好吧，这招确实不错。

在这种情况下，对服务器来说这是一个全新的玩家，我们没有任何办法将他和已有的封禁记录关联起来。不幸的是，这意味着他可以为所欲为，而一旦他们再次被封禁，他们只需要再次更换 IP 地址和 Steam ID 就可以继续逍遥法外。

为了缓解这种情况，我们可以维护一个 VPN 和它所有 IP 地址的列表，但是这将是一个非常枯燥耗时的工作，所以我们的管理团队在讨论之后对这个方案兴趣寥寥。

你可能会说，作弊者早晚会用尽他的 IP 地址和 Steam ID 的。事实上，他们不会用尽的。
我们的分析表明，我们最臭名昭著的作弊者在世界各处有几乎无限的 IP 地址，
和超过 87 个已经购入 CSGO 的 Steam 账号。

## 用 IP 作为指纹会出问题

我们需要记住一点，Steam ID 是唯一的，但 IP 地址不是。
我们曾经遇到一个情况，一对兄弟想要在我们的服务器玩游戏，但是其中一个会作弊。
结果就是两个人都被封号了，因为他们两个人的账号被关联在了一起。
其中一个玩家声称「他无法控制自己的兄弟，所以他不应该因为他兄弟的行为被惩罚」。

是的，他说的没错。

另一个问题是类似大学这样的机构会使用共享网络。
有时候一群玩家会使用他们大学的单个出口 IP 地址。
如果其中一个人因为作弊被封号，所有其他玩家都会被标记为作弊，他们的 Steam ID 和他们家里的 IP 地址也都会被误伤。

我们做了额外的系统来规避这种情况，但整体上我们还是建议大家不要通过自己不信任的网络进行游戏。

## IdentityLogger
### 让我们面对现实

我很严肃且并无不敬地说一句，作弊者都是一些傻叉。他们现在是傻叉，他们会一直是傻叉。
也许还会生出很多傻叉小孩。

我始终搞不懂你为什么要在游戏中作弊，这不是一种极其无聊的时间浪费么？
不论我游戏水平优劣，对我来说最大的乐趣就是和其他人竞技，努力提升自我，最终获得自豪感和成就感。

2017年初，我们的服务器中的封禁规避问题越发严重。
这大大增加了管理员们的工作负担，因为他们需要持续地对游戏记录进行人工审查，这些工作不但耗时，而且极其无聊。我至今都非常感激管理员们在我们社区中的辛勤劳动。

那天，我坐下来，拿出我的橡皮鸭，戴上降噪耳机，想通过「工程学」来抓到所有的作弊玩家。

### 应对 Steam ID 和 IP 地址的同时变化


